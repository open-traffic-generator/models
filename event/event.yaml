components:
  schemas:
    Event:
      description: |-
        The optional container for event configuration.
      type: object
      properties:
        enable:
          description: |-
            True to enable all events. 
            Enabling this option may affect the resultant packet payload due to 
            additional instrumentation data.
          type: boolean
          default: false
        link:
          $ref: '#/components/schemas/Event.Link'
        rx_rate_threshold:
          $ref: '#/components/schemas/Event.RxRateThreshold'
        route_advertise_withdraw:
          $ref: '#/components/schemas/Event.RouteAdvertiseWithdraw'

    Event.RxRateThreshold:
      description: |-
        The optional container for rx rate threshold event configuration.
      type: object
      properties:
        enable:
          description: |-
            True to enable the rx_rate_threshold event. 
            Enabling this option may affect the resultant packet payload due to 
            additional instrumentation data.
          type: boolean
          default: false
        threshold:
          description: |-
            True to enable notifications when the rx rate of a flow passes above 
            or below the threshold value. 
          type: number
          format: float
          maximum: 100
          minimum: 0
          default: 95

    Event.Link:
      description: |-
        The optional container for link up/down event configuration.
      type: object
      properties:
        enable:
          description: |-
            True to enable notifications when a link up/down event occurs. 
          type: boolean
          default: false

    Event.RouteAdvertiseWithdraw:
      description: |-
        The optional container for route advertise/withdraw event configuration.
      type: object
      properties:
        enable:
          description: |-
            True to enable notifications when a route advertise/withdraw 
            event occurs. 
          type: boolean
          default: false
          
    Event.Request:
      type: object
      properties:
        type:
          description: |-
            Constrain the events being returned by specifying event types.
            If the list is empty then all event types will be returned. 
          type: array
          items: 
            type: string
            enum:
            - link_down
            - link_up
            - route_withdraw
            - route_advertise
            - flow_rx_rate_above_threshold
            - flow_rx_rate_below_threshold
            example: route_withdraw
        source:
          description: |-
            Constrain the events being returned by specifying event sources. 
            If the list is empty then all event sources will be returned. 
          type: array
          items:
            type: string
          x-constraint:
          - '/components/schemas/Port/properties/name'
          - '/components/schemas/Device.Bgpv4Route/name'
          - '/components/schemas/Device.Bgpv6Route/name'

    Event.Subscription:
      description: |-
        A container that describes what events a system should provide and 
        optionally where to publish them.  
      type: object
      properties:
        events:
          $ref: '#/components/schemas/Event.Request'
        callbackUrl:
          description: |-
            Indicates where a client wants to be notified of the events set in
            the events property.
            If this property is empty or null then no event notifications will
            be forwarded.
          type: string
          format: uri
          example: https://127.0.0.1/event/notification
          
