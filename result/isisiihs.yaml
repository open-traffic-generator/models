components:
  schemas:
    IsisIIHs.State.Request:
      description: >-
        The request to retrieve ISIS IIH information exchanged by the ISIS routers.
      type: object
      properties:
        isis_router_names:
          description: >-
            The names of ISIS routers for which learned information is requested.
            An empty list will return results of IIH States for all ISIS routers.
          type: array
          items:
            type: string
          x-constraint:
          - "/components/schemas/Device.IsisRouter/properties/name"
          x-field-uid: 1

    IsisIIHs.State:
      description: >-
        The result of ISIS IIH information that are exchanged.
      type: object
      properties:
        isis_router_name:
          description: >-
            The name of the ISIS Router.
          type: string
          x-field-uid: 1
        states:
          description: >-
            State of this router.
          type: array
          items:
            $ref: '#/components/schemas/IsisLocalIIH.State'
          x-field-uid: 2
        neighbor_states:
          description: >-
            One or more Neighbors that are learned by this ISIS router.
          type: array
          items:
            $ref: '#/components/schemas/IsisNeighborIIH.State'
          x-field-uid: 3

    IsisLocalIIH.State:
      description: >-
        Information for a local adjacency.
      type: object
      properties:
        level_type:
          description: |-
            This indicates whether Neighbor IS-IS router is participating in Level-1 (L1), 
            Level-2 (L2) or both L1 and L2 domains on this interface.
          type: string
          x-field-uid: 1
          x-enum:
            level_1:
              x-field-uid: 1
            level_2:
              x-field-uid: 2
            level_1_2:
              x-field-uid: 3
        hold_timer:
          description: >-
            Hold timer being sent in the IIH PDU.
          type: integer
          format: uint32
          x-field-uid: 2    
        restarting_status:
          description: >- 
            Reference to Restarting Information.
          $ref: '#/components/schemas/IsisIIH.LocalRestartStatus'
          x-field-uid: 3
        tlvs:
          description: |-
            It refers to IIH PDU TLVs container.
          $ref: '#/components/schemas/IsisIIH.Tlvs'
          x-field-uid: 4
    
    IsisNeighborIIH.State:
      description: >-
        A ISIS Neighbor Information.
      type: object
      properties:
        system_id:
          description: >-
            System ID of a neighbor in the format, e.g. '640000000001'.
          type: string
          x-field-uid: 1
        level_type:
          description: |-
            This indicates whether Neighbor IS-IS router is participating in Level-1 (L1), 
            Level-2 (L2) or both L1 and L2 domains on this interface.
          type: string
          x-field-uid: 2
          x-enum:
            level_1:
              x-field-uid: 1
            level_2:
              x-field-uid: 2
            level_1_2:
              x-field-uid: 3
        hold_timer:
          description: >-
            Hold timer is in the IIH PDU.
          type: integer
          format: uint32
          x-field-uid: 3     
        restarting_status:
          description: >- 
            Reference to Restarting Information.
          $ref: '#/components/schemas/IsisIIH.NeighborRestartStatus'
          x-field-uid: 4
        tlvs:
          description: |-
            It refers to IIH PDU TLVs container.
          $ref: '#/components/schemas/IsisIIH.Tlvs'
          x-field-uid: 5

    IsisIIH.LocalRestartStatus:
      description: >-
       This contains the Restarting/Starting/Running state of this router.
      type: object
      properties:
        state:
          description: |-
            Current State of this router.
            - starting: Is in Starting state when Restarting Tlv has been sent with SA bit set.
            - running: Is in Running state when Restarting Tlv is not present or Restarting Tlv has been sent with SA or RR bits unset.
            - restarting: Is in Restarting state when Restarting Tlv has been sent with RR bits set.
          type: string
          x-field-uid: 1
          x-enum:
            running:
              x-field-uid: 1
            starting:
              x-field-uid: 2
            restarting:
              x-field-uid: 3
        last_attempted_status:
          description: >-
            This object holds the information of last Graceful Restart status provided
            the router is restarted at least once throught out a test run.
          $ref: '#/components/schemas/IsisIIH.LocalGRLastAttemptStatus'
          x-field-uid: 2
    
    IsisIIH.NeighborRestartStatus:
      description: >-
       This contains the Restarting/Starting/Running state of a neighbor router.
      type: object
      properties:
        state:
          description: |-
            Current State of Neighbor router.
            - starting: Is in Starting state when Restarting Tlv has been received with SA bit set.
            - running: Is in Running state when Restarting Tlv is not present or Restarting Tlv has been received with SA or RR bits unset.
            - restarting: Is in Restarting state when Restarting Tlv has been received with RR bits set.
          type: string
          x-field-uid: 1
          x-enum:
            running:
              x-field-uid: 1
            starting:
              x-field-uid: 2
            restarting:
              x-field-uid: 3
        last_attempt_status:
          description: >-
            This object holds the information of last Graceful Restart status provided
            the neigbhor router is restarted at least once throught out a test run.
          $ref: '#/components/schemas/IsisIIH.NeighborGRLastAttemptStatus'
          x-field-uid: 2

    IsisIIH.LocalGRLastAttemptStatus:
      description: |-
        This object contains the status of the last attempted Graceful Restart status of this router.
        - succeeded: Corresponding the 'succeeded' object is populated if the last Graceful Status is successful.
        - failed: Corresponding the 'failed' object is populated if the last Graceful Status is unsuccessful.
        - unavailable: This value is set if Graceful Restart status is not available at this moment beause either of Graceful
        Restart status is not given or Graceful Restart status is in progress.
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            succeeded:
              x-field-uid: 1
            failed:
              x-field-uid: 2
            unavailable:
              x-field-uid: 3
        succeeded:
          $ref: '#/components/schemas/IsisIIH.LocalGRLastAttemptSucceeded'
          x-field-uid: 2
        failed:
          $ref: '#/components/schemas/IsisIIH.LocalGRLastAttemptFailed'
          x-field-uid: 3
        unavailable:
          type: boolean
          x-field-uid: 4

    IsisIIH.LocalGRLastAttemptFailed:
      description: >-
        This object contains failure status of Graceful Restart in the last attempted.
      type: object
      properties:
        reason:
          description: |-
            Failure reason of last Graceful Restart.
          type: string
          x-field-uid: 1

    IsisIIH.LocalGRLastAttemptSucceeded:
      description: >-
        This object contains the result of a successful graceful restart status in the last attempted.
      type: object
      properties:
        lsdb_syncup_time:
          description: |-
            The time is taken to synchronize the L1 and L2 LSDB by this Restarting router.
            By this time, the CSNP list is cleared and all LSPs are collected by the neighbor(s).
          type: integer
          format: uint32
          x-field-uid: 1
        adjacency_bring_up_time:
          description: |-
            The time (in second) is taken to bring up the adjacency by this Restarting router.
            The time is counted when the Restart TLV with RR bit set in a IIH PDU is sent 
            and till start sending the Restart TLV with RR bit unset.
          type: integer
          format: uint32
          x-field-uid: 3

    IsisIIH.NeighborGRLastAttemptStatus:
      description: >-
        This object contains the status of the last successful Graceful Restart status of a neighbor router.
      type: object
      properties:
        adjacency_bring_up_time:
          description: |-
            The time (in second) is taken to bring up adjacency by the Restarting Neighbor.
            The time is counted by a Helper router when the Restart TLV with RR bit set in a IIH PDU is received 
            and till it receives the Restart TLV with RR bit unset in a IIH PDU from the Neighbor Router.
          type: integer
          format: uint32
          x-field-uid: 1

    IsisIIH.NeighborGRLastAttemptStatus:
      description: |-
        This object contains the status of the last attempted Graceful Restart status of a ISIS neighbor.
        - succeeded: Corresponding the 'succeeded' object is populated if the last Graceful Status is successful.
        - failed: Corresponding the 'failed' object is populated if the last Graceful Status is unsuccessful.
        - unavailable: This value is set if Graceful Restart status is not available at this moment beause either of Graceful
        Restart status is not given or Graceful Restart status is in progress.
      type: object
      properties:
        choice:
          type: string
          x-field-uid: 1
          x-enum:
            succeeded:
              x-field-uid: 1
            failed:
              x-field-uid: 2
            unavailable:
              x-field-uid: 3
        succeeded:
          $ref: '#/components/schemas/IsisIIH.NeighborGRLastAttemptSucceeded'
          x-field-uid: 2
        failed:
          $ref: '#/components/schemas/IsisIIH.NeighborGRLastAttemptFailed'
          x-field-uid: 3
        unavailable:
          type: boolean
          x-field-uid: 4

    IsisIIH.NeighborGRLastAttemptFailed:
      description: >-
        This object contains failure status of Graceful Restart in the last attempted.
      type: object
      properties:
        reason:
          description: |-
            Failure reason of last Graceful Restart.
          type: string
          x-field-uid: 1

    IsisIIH.NeighborGRLastAttemptSucceeded:
      description: >-
        This object contains the result of a successful graceful restart status in the last attempted by a Neighbor.
      type: object
      properties:
        adjacency_bring_up_time:
          description: |-
            The time (in second) is taken to bring up adjacency by the Restarting Neighbor.
            The time is counted by a Helper router when the Restart TLV with RR bit set in a IIH PDU is received 
            and till it receives the Restart TLV with RR bit unset in a IIH PDU from the Neighbor Router.
          type: integer
          format: uint32
          x-field-uid: 1



    IsisIIH.Tlvs:
      description: >-
        This contains the list of TLVs present in a IIH PDU.
      type: object
      properties:
        restart_tlv:
          description: >-
            Restart Tlv.
          $ref: '#/components/schemas/IsisIIH.RestartTlv'
          x-field-uid: 1
        
    IsisIIH.RestartTlv:
      description: >-
        Container of Restart TLV in IIH PDU.
        Reference: https://datatracker.ietf.org/doc/html/rfc8706#name-restart-tlv
      type: object
      properties:
        flags:
          description: >-
            1 Octen Restart Flags 
          $ref: '#/components/schemas/IsisIIHRestart.Flags'
          x-field-uid: 1
        remaining_time:
          description: >-
            Remaining Holding Time (in seconds).
          type: integer
          format: uint32
          x-field-uid: 2
        restarting_neighbor_id:
          description: >-
           Restarting Neighbor's System ID in the format, e.g. '640000000001'.
          type: string
          x-field-uid: 3
      
    IsisIIHRestart.Flags:
      description: >-
        Restarting flags in Restarting TLV in IIH PDU.
      type: object
      properties:
        rr_bit:
          description: |-
            Restart Request bit.
          type: boolean
          x-field-uid: 1
        ra_bit:
          description: |-
            Restart Acknowledgement.
          type: boolean
          x-field-uid: 2
        sa_bit:
          description: |-
            Suppress Adjacency Advertisement.
          type: boolean
          x-field-uid: 3
        pr_bit:
          description: |-
            Restart Planned.
          type: boolean
          x-field-uid: 4
        pa_bit:
          description: |-
            Planned Pestart Acknowledgement.
          type: boolean
          x-field-uid: 5