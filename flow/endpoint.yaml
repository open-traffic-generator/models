openapi: 3.1.0

info:
  title: Flow endpoint models
  version: ^0.0.0


components:
  schemas:
    Flow.Endpoint:
      description: >-
        A container for different types of endpoints.
        The endpoint choice dictates the type of flow.
      type: object
      required: [choice]
      properties:
        choice:
          description: >-
            The type of endpoint that the flow will originate from.
          type: string
          enum: [port, device]
        port:
          $ref: '#/components/schemas/Flow.PortEndpoint'
        device:
          $ref: '#/components/schemas/Flow.DeviceEndpoint'

    Flow.PortEndpoint:
      description: >-
        An endpoint that contains a transmit port and 0..n receive ports.
      type: object
      required: [tx_port_name]
      properties:
        tx_port_name:
          description: >-
            The unique name of a port that is the transmit port.
          type: string
        rx_port_names:
          description: >-
            The unique names of ports that are the intended receive ports.
          type: array
          items:
            type: string

    Flow.DeviceEndpoint:
      description: >-
        An endpoint that contains 1..n emulated transmit devices and 1..n 
        emulated receive devices.
        Implemementations may use learned information from the devices to 
        pre-populate Flow.Flow.properties.packet[Flow.Header fields].
      type: object
      required: [tx_device_names, rx_device_names]
      properties:
        tx_device_names:
          description: >-
            The unique names of emulated devices that will be transmitting.
            The devices names can be 1..n of 
            Ethernet, Vlan, Ipv4 etc
          type: array
          items:
            type: string
        rx_device_names:
          description: >-
            The unique names of emulated devices that will be receiving.
            The devices names can be 1..n of 
            Ethernet, Vlan, Ipv4 etc
          type: array
          items:
            type: string
