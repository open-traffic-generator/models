components:
  schemas:
    AdvancedMetrics.Request:
      description: >-
        The request container for flow metrics.
        These metrics will not be available if the property 
        /components/schemas/Flow/properties/metrics is false.
      type: object
      properties:
        flow_names:
          description: >-
            The names of flow objects to return results for.
            An empty list will return results for all flows.
          type: array
          items:
            type: string
          x-constraint:
          - "/components/schemas/Flow/properties/name"
        metric_names:
          description: >-
            The list of metric names that the returned result set will contain.
            If the list is empty then all metrics will be returned but will be
            aggregated by flow name, the metrics will not be disaggregated by 
            metric group names.
            The name of the flow cannot be excluded from the response.
          type: array
          items:
            type: string
            enum:
              - transmit
              - frames_tx
              - frames_rx
              - bytes_tx
              - bytes_rx
              - frames_tx_rate
              - frames_rx_rate
              - loss
              - timestamps
              - latency
        metric_groups:
          description: >-
            Disaggregate the advanced flow metrics response by specifying 
            additional metric group filters.
          $ref: '#/components/schemas/Flow.Group.Request'

    Flow.Group.Request:
      type: object
      properties:
        port:
          description: |-
            Disaggregate flow metrics by transmit port and receive port
          type: boolean
          default: false
        ingress_packet_field_names:
          description: |-
            Disaggregate flow metrics by ingress packet header field names 
          type: array
          items:
            type: string
        egress_packet_field_names:
          description: |-
            Disaggregate flow metrics by egress packet header field names 
          type: array
          items:
            type: string


    AdvancedMetrics.Response:
      type: array
      items:
        $ref: '#/components/schemas/AdvancedMetrics.Flow'

    Flow.Group.Response:
      type: object
      properties:
        port_tx:
          type: string
        port_rx:
          type: string
        ingress:
          type: array
          items:
            $ref: '#/components/schemas/Flow.Field.Group'
        egress:
          type: array
          items:
            $ref: '#/components/schemas/Flow.Field.Group'

    Flow.Field.Group:
      type: object
      properties:
        name:
          type: string
        value: 
          type: string

    AdvancedMetrics.Flow:
      type: object
      properties:
        name:
          description: >-
            The name of the advanced flow metric response. 
            The name includes the flow name by default along with any requested 
            metric_group_names.
          type: string
          example: 'Tx -> Rx'
        groups:
          description: |-
            Flow disaggregation groups.
          $ref: '#/components/schemas/Flow.Group.Response'
        transmit:
          description: >-
            The transmit state of the flow.
          type: string
          enum: [started, stopped, paused]
        frames_tx:
          description: >-
            The current total number of frames transmitted
          type: integer
        frames_rx:
          description: >-
            The current total number of valid frames received
          type: integer
        bytes_tx:
          description: >-
            The current total number of bytes transmitted
          type: integer
        bytes_rx:
          description: >-
            The current total number of bytes received
          type: integer
        frames_tx_rate:
          description: >-
            The current rate of frames transmitted
          type: number
        frames_rx_rate:
          description: >-
            The current rate of valid frames received
          type: number
        loss:
          description: >-
            The percentage of lost frames
          type: number
        timestamps:
          $ref: '#/components/schemas/AdvancedMetrics.Timestamp'
        latency:
          $ref: '#/components/schemas/AdvancedMetrics.Latency'

    AdvancedMetrics.Timestamp:
      description: |-
        The container for timestamp metrics.
      type: object
      properties:
        first_timestamp_us:
          description: |-
            First timestamp in microseconds
          type: number
          format: double
        last_timestamp_us:
          description: |-
            Last timestamp in microseconds
          type: number
          format: double

    AdvancedMetrics.Latency:
      description: |-
        The container for latency metrics. The min/max/avg values are dependent 
        on the type of latency measurement mode that is configured.
      type: object
      properties:
        minimum_us:
          description: |-
            Minimum latency in microseconds
          type: number
          format: double
        maximum_us:
          description: |-
            Maximum latency in microseconds
          type: number
          format: double
        average_us:
          description: |-
            Average latency in microseconds
          type: number
          format: double
