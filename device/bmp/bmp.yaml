components:
  schemas:
    Device.Bmp:
      description: >-
        Top-level container for BGP Monitoring Protocol (BMP) configuration.
        BMP, as defined in RFC 7854, provides a mechanism to monitor BGP sessions.
        This configuration pertains to the device when acting as a BMP collector/server,
        listening for connections from BGP speakers (routers) acting as BMP clients.
        BMP is unidirectional, meaning the monitoring station only receives information; it doesn't send commands or control the monitored router. .
      type: object
      properties:
        ipv4_interfaces:
          description: >-
            This contains an array of references to IPv4 interfaces, each of which will have one or more BMP servers  configured, each BMP server will have a connection to a different monitored router.   
          type: array
          items: 
            $ref: './bmp.yaml#/components/schemas/Device.Bmp.V4Interface'
          x-field-uid: 1
        ipv6_interfaces:
          description: >-
            This contains an array of references to IPv6 interfaces, each of which will have one or more BMP servers configured, each BMP server will have a connection to a different monitored router.
          type: array
          items:
            $ref: './bmp.yaml#/components/schemas/Device.Bmp.V6Interface'
          x-field-uid: 2

    Device.Bmp.V4Interface:
      description: >-
        Configuration for BMP servers on a single IPv4 interface.
      type: object
      required: [ipv4_name, servers]
      properties:
        ipv4_name:
          description: >-
            The unique name of the IPv4 interface used as the source IP for BMP server.
          type: string
          x-constraint:
          - '/components/schemas/Device.Ipv4/properties/name'          
          x-field-uid: 1
        servers:
          description: >-
            This contains the configuration of BMP servers configured on this IPv4 interface.
          type: array
          items:
            $ref: './bmp.yaml#/components/schemas/Device.Bmp.ServerV4'
          x-field-uid: 2

    Device.Bmp.V6Interface:
      description: >-
        Configuration for BMP servers on a single IPv6 interface.
      type: object
      required: [ipv6_name, servers]
      properties:
        ipv6_name:
          description: >-
            The unique name of the IPv6 interface used as the source IP for BMP server.
          type: string
          x-constraint:
          - '/components/schemas/Device.Ipv6/properties/name'
          x-field-uid: 1
        servers:
          description: >-
            This contains the configuration of a BMP servers configured on this IPv6 interface.
          type: array
          items: 
            $ref: './bmp.yaml#/components/schemas/Device.Bmp.ServerV6'
          x-field-uid: 2

    Device.Bmp.ServerV4:
      description: >-
        Configuration for a BMP server connected to a specific IPv4 BMP client.
      type: object
      required: [name,client_ip]
      properties:
        client_ip:
          description: |- 
            The IPv4 address of the BMP client from which connections will be accepted by this BMP server.
          type: string
          format: ipv4
          x-field-uid: 1
        listen_port:
          description: |-
            The TCP port number on which to accept BMP connection from the remote monitored router.
          type: integer
          format: uint32
          default: 11019
          maximum: 65535
          x-field-uid: 2
        discard_adj_rib:
          description: |-
            If enabled, discard the BGP prefix information sent by the remote BMP client.
          type: boolean
          default: false
          x-field-uid: 3
        passive_mode:
          description: |-
            If set to true, the BMP server will wait for the remote BMP client to initiate the BMP session
            by establishing the TCP connection, rather than initiating the session from the BMP Server.
          type: boolean
          default: true
          x-field-uid: 4      
        name:
          x-include: ../../common/common.yaml#/components/schemas/Named.Object/properties/name
          x-field-uid: 5

    Device.Bmp.ServerV6:
      description: >-
        Configuration for a BMP server connected to a specific IPv6 BMP client.
      type: object
      required: [name,client_ip]
      properties:
        client_ip:
          description: |- 
            The IPv6 address of the BMP client from which connections will be accepted by this BMP server.
          type: string
          format: ipv6
          x-field-uid: 1
        listen_port:
          description: |-
            The TCP port number on which to accept BMP connection from the remote monitored router.
          type: integer
          format: uint32
          default: 11019
          maximum: 65535
          x-field-uid: 2
        discard_adj_rib:
          description: |-
            If enabled, discard the BGP prefix information sent by the remote BMP client.
          type: boolean
          default: false
          x-field-uid: 3 
        passive_mode:
          description: |-
            If set to true, the BMP server will wait for the remote BMP client to initiate the BMP session
            by establishing the TCP connection, rather than initiating the session from the BMP Server.
          type: boolean
          default: true
          x-field-uid: 4     
        name:
          x-include: ../../common/common.yaml#/components/schemas/Named.Object/properties/name
          x-field-uid: 5
   
   