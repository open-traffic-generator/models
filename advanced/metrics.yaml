components:
  schemas:
    Flow.Metrics.Request:
      description: >-
        The request container for flow metrics.
      type: object
      properties:
        flow_groups:
          description: >-
            A list of flow groups to apply to all flow metrics.
            An empty list will return metrics for all flows.
          type: array
          items:
            $ref: '#/components/schemas/Flow.Metric.Group'
          x-constraint:
          - "/components/schemas/Flow/properties/name"
        metric_names:
          description: >-
            The list of metric names that the returned result set will contain.
            If the list is empty then all metrics will be returned.
          type: array
          items:
            type: string
            enum:
              - transmit
              - frames_tx
              - frames_rx
              - bytes_tx
              - bytes_rx
              - frames_tx_rate
              - frames_rx_rate

    Flow.Metric.Group:
      type: object
      required: [flow_name]
      properties:
        flow_name:
          description: |-
            Flow metrics will be retrieved for this flow name
          type: string
        ports:
          description: |-
            Disaggregate the flow metrics by transmit port and receive port
          type: boolean
          default: false
        ingress_packet_field_names:
          description: |-
            Disaggregate the flow metrics by ingress packet header field names 
          type: array
          default: []
          items:
            type: string
        egress_packet_field_names:
          description: |-
            Disaggregate the flow metrics by egress packet header field names 
          type: array
          default: []
          items:
            type: string


    AdvancedMetrics.Response:
      type: array
      items:
        $ref: '#/components/schemas/AdvancedMetrics.Flow'

    Flow.Group.Response:
      type: object
      properties:
        port_tx:
          description: |-
            Name of the transmit port
          type: string
        port_rx:
          description: |-
            Name of the receive port
          type: string
        ingress:
          description: |-
            Names of flow packet field metric group
          type: array
          items:
            $ref: '#/components/schemas/Flow.Field.Group'
        egress:
          description: |-
            Names of flow egress packet field metric group
          type: array
          items:
            $ref: '#/components/schemas/Flow.Field.Group'

    Flow.Field.Group:
      type: object
      properties:
        name:
          description: |-
            Name of packet field metric group
          type: string
        value: 
          description: |-
            Value of named packet field metric group
          type: string

    AdvancedMetrics.Flow:
      type: object
      properties:
        name:
          description: >-
            The name of the advanced flow metric response. 
            The name includes the flow name by default along with any requested 
            metric_group_names.
          type: string
          example: 'Tx -> Rx'
        groups:
          description: |-
            Flow disaggregation groups.
          $ref: '#/components/schemas/Flow.Group.Response'
        transmit:
          description: >-
            The transmit state of the flow.
          type: string
          enum: [started, stopped, paused]
        frames_tx:
          description: >-
            The current total number of frames transmitted
          type: integer
        frames_rx:
          description: >-
            The current total number of valid frames received
          type: integer
        bytes_tx:
          description: >-
            The current total number of bytes transmitted
          type: integer
        bytes_rx:
          description: >-
            The current total number of bytes received
          type: integer
        frames_tx_rate:
          description: >-
            The current rate of frames transmitted
          type: number
        frames_rx_rate:
          description: >-
            The current rate of valid frames received
          type: number
        loss:
          description: >-
            The percentage of lost frames
          type: number
        timestamps:
          $ref: '#/components/schemas/AdvancedMetrics.Timestamp'
        latency:
          $ref: '#/components/schemas/AdvancedMetrics.Latency'

    AdvancedMetrics.Timestamp:
      description: |-
        The container for timestamp metrics.
      type: object
      properties:
        first_timestamp_us:
          description: |-
            First timestamp in microseconds
          type: number
          format: double
        last_timestamp_us:
          description: |-
            Last timestamp in microseconds
          type: number
          format: double

    AdvancedMetrics.Latency:
      description: |-
        The container for latency metrics. The min/max/avg values are dependent 
        on the type of latency measurement mode that is configured.
      type: object
      properties:
        minimum_us:
          description: |-
            Minimum latency in microseconds
          type: number
          format: double
        maximum_us:
          description: |-
            Maximum latency in microseconds
          type: number
          format: double
        average_us:
          description: |-
            Average latency in microseconds
          type: number
          format: double
