paths:
  /advanced/metrics:
    post:
      tags: ['Advanced Metrics']
      operationId: get_flow_metrics
      description: |-
        An API that retrieves advanced flow metrics.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../advanced/metrics.yaml#/components/schemas/AdvancedMetrics.Request'
      responses:
        '200':
          description: |-
            Response from traffic generator for flow metrics
          content:
            application/json:
              schema:
                $ref: '../advanced/metrics.yaml#/components/schemas/AdvancedMetrics.Response'
        '590':
          $ref: '../result/request.yaml#/components/responses/Error'

  /advanced/analytics:
    post:
      tags: ['Advanced Metrics']
      operationId: get_analytics
      description: |-
        An API that retrieves advanced analytics.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '../advanced/analytics.yaml#/components/schemas/AdvancedAnalytics.Request'
      responses:
        '200':
          description: |-
            Advanced analytics response
          content:
            application/json:
              schema:
                $ref: '../advanced/analytics.yaml#/components/schemas/AdvancedAnalytics.Response'
        '590':
          $ref: '../result/request.yaml#/components/responses/Error'

  /event/subscribe:
    post:
      tags: ['Advanced Metrics']
      operationId: subscribe_event
      description: |-
        An API for subscribing to event notifications.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '../advanced/event.yaml#/components/schemas/Event.Subscription'
      callbacks:
        event_notification:
          '{$request.body#/callbackUrl}':
            post:
              description: |-
                The event notification that will be streamed to the subscriber.
              requestBody:
                content:
                  application/json:
                    schema:
                      $ref: '../advanced/event.yaml#/components/schemas/Event'
              responses:
                '200':
                  $ref: '../result/request.yaml#/components/responses/Success'
      responses:
        '200':
          $ref: '../result/request.yaml#/components/responses/Success'
        '590':
          $ref: '../result/request.yaml#/components/responses/Error'


